const i = `....#.....
.........#
..........
..#.......
.......#..
..........
.#..^.....
........#.
#.........
......#...`

const m = i.split('\n').map(x => x.split(''))

// console.log(m)

const inBounds = (grid, coord) => {
  return coord[0] >= 0 && coord[0] < grid.length && coord[1] >= 0 && coord[1] < grid[0].length;
}

const move = (coord, dir) => {
  return [coord[0] + dir[0], coord[1] + dir[1]];
}

const deltas = [[-1, 0], [0, 1], [1, 0], [0, -1]]

const partOne = (m) => {
  let start = [0, 0]
  for (let x = 0; x < m.length; x++) {
    for (let y = 0; y < m[x].length; y++) {
      if (m[x][y] === '^') { start = [x, y] }
  }}
  let dir = deltas[0]
  while (inBounds(m, start)) {
    let next = move(start, dir)
    // console.log(next);
    while (m[next[0]]?.[next[1]] === '#') {
      const dirInd = deltas.indexOf(dir)
      dir = deltas[dirInd < 3 ? dirInd + 1 : 0];
      next = move(start, dir);
    }
    m[start[0]][start[1]] = 'X';
    start = next;
  }
  // console.log(m.map(x => x.join('')).join('\n'))
  return m;
}

console.log(partOne(m).map(x => x.map(y => y === 'X' ? 1 : 0).reduce((c, i) => c + i)).reduce((c, i) => c + i))
console.log(partOne(`........................#........#................#.............#..#....#.#.#.........#........##..................#..#...........
.#........#......##........#.................................................#.#.........#......#.................................
...........#.#.##.#.........#.#..#............#.....................................................#.............#...............
..........#...............#......#...............#.#..............................#..........#........#..#...##.........#..#......
..........................................................#...........................................#...........................
................#.....#.............#...........................................................#.....#..........#...#...##.......
.....................#......#....................#..................#.....................#................................#......
......#........#.........#.....................................#......................#...........#................#.......#......
.........#.......#...#..................##.#...#...........#.......#............#...#....#...........#................#...........
..........................................#..........................#........#.....##............#.........................#.....
..........#...................##.......#.............#....##..............#.........#..............#........#..........#....#.....
.#....##........#.....................................#...#.............................#..............#.....#....................
....#..#................................................#.......#..........#.....#.....#..........................................
.............##...............#..........#...............................................#............#..............#..##....#...
......#...............#...............#.........................................................................#.#..............#
......#........................................................................................#.......#.....#................#...
.......#..#...#.............................#......#.....#........................................#.........................#..##.
.................................#..................#.......#......#...................#...................#.......#............#.
......#....................#.........................#........................................................#...#.......#..#..#.
..##....#...............................#.................#....#........#......#..........#....#........#..................#......
..................#..........#................................#.........#...........#..#......#.....................#.............
##.................................................#..............#....#...............#..........................................
....#..............#.............#..........................................................................#................#....
..................................................#...#..#.......#................................................#...........#...
.....#.......#...............................................................#......#.....#......................................#
....#....................##....................#............#................................#..#....#....#..........#............
.#.........................#.....................#..........................##............................................#.......
.......................#.........................................#................................................................
...............#........................................................................#..........#.............................#
.#..............................#..#....................#........................#......#.#......#.......#....................#..#
..........................#........#.........#.........#...#..#................#........#.........................#...............
..#.................................#.........#......................#............................................................
...........................#..............................................#.................#...............#.....................
..........#..................#.............................................#.......................#..............................
....................#............##..........................#...............#..........#.......................................#.
....................#....#.....................................................................#.................................#
....#.......#...................#....#.#....#..................................#.#....#..#.............................#.....##...
.............#.#...................................................................#........#..............................#......
.......................#.....................#.......#.........................................#..........#.......................
...............#..............#..................................#.............#..................................................
......................................................................................#........#......................#.....#.....
.........#.....................................................#................#..........................#........###...........
...................#..##...............#......................#...................................................................
.............#........................................#..................................#.#.#....................................
......#............#.........................#..........#..#.................................................................##...
............#...............#..................................#...........#...............................#...........#..........
................#.......#.......................#................#.............#................................#.................
.........................#.#.........#..#.....#.....................................#................................#............
..#...............#..#..........................#.#.....#....................#....................................................
................................................................................#..........#..............#.......................
............#.#......#......#........#..................#...#.....................................................................
....#......................#........................#..................#......#.....#.............................................
.#..................#...........................#..........#..........................................#....#......................
...............#......................#.......#.....#...#.................#...............................................#.......
#...#.......#..............................................................................................#...........#......#...
........................#......................#..........#...............................##......#...........................#...
....................#....#..............#.....#.....#................#............................................................
................#........................................................................................#........................
...##................#.............#..............................................................................................
.#....#........................................................................................................................##.
..#...................................#......#.#......#...................#........#.............................#....##..........
.......................................................#..#....#..#.................................................#.............
............#..................#......#.....#...........................................................#..#........#............#
..#................................#....................................................................#.............#......#....
..#..........#........#..............................................................................................#............
.....#.....................#..............#.................................#................................#...#................
........................#........#..................................................................................#.............
...#...........#.............................................#....................#....#..........#...............................
...................#...........#...................................................................#...........#..................
...........#............................#......................................................................................##.
#..............#.#.......................................#.......................#.....#...........#.......#...........#.##.......
..............................................................##.........................................#.............#.........#
...........................#.#..................................................#..................#..#...........................
.....................................#...............#.....#...................................#..................................
..#...................#.#....#...#......................................................#.#..................................#....
..........................................#......................................................................#................
.............#...................................................................#...#....#........#...................#..........
.......................#.......................................##...........#......#......#..............................#........
.......#..............#..............#..............................................................#............................#
...........................................#...#.......#......#...............................#.........#.........................
.......#...................................................#........................^..#..........................................
.#..........................................................................................#.......#.#..#........................
............................##........................................................................#..#........................
..........#.#..#....#.##........................#.................................................................................
......#.#...................................#...#...................#.............#.....#.........................................
.................#........................................................................................#..#.#..................
#....................#.......................................#..#..#.....#..............#......................................#..
..............#.#............................................................#.....#......................................#......#
....................#.......#.............................#..............#.........................................##.............
.....#................................#.#...........#...........#.......................................#...#....#................
...............#...#......................#............................#..................................#.......................
....#........##...............................................................#......#...#.........#.....#..................#.....
...............................#......................................................................#...........................
............................#.............................#........##...............#................#....#...#..............#....
.......................#................#.......#........................................................................#........
..................................................................................#......................#.......#.#..............
........#.........................#........#.........................#.......................#......................#......#......
.........................#..#...........#..#.......................#.#.................#..........................................
......#.................#......................................................................#........................#.........
......................................##..........#...........................#........#...........#..............................
.......................................#...........................#.........#....#................#...............#..............
...........#...........#.........................#.......#.................#....#.#...........#..................#.##...........#.
...#..................#..#...............#..#...................................#.......#................#...................#....
...............#............#.......#.............#............#......###.............#.............................#..........#..
.......................................#...........................................#........#...........#.........................
................#...........#.....#..#...........##..................##..........#....#.....#...#........#........................
...............................##.............................................................#..........#...#....#...............
............#.................#...##.........#.......................................................................#............
...........#.#............................#...............##...........................................#............#....#........
...............................................#...........................................#..........#......................#....
......................................#........................................#.....................##...........#.....#..#.#....
..............................#.......#...#.#...............................................................................##....
................##......#..#.......#...........#............#.#......#..#................#..#.....#..................##...........
#.....#...........................#....................#.........................................................................#
............#.............#........#........#.#...............#...........................#.........#.............#......#........
#...#.........#.....#...................................................#.........................................................
.....................#...........#....................#.....#............##..........#....#..........#......#..........#..........
...................................#.........#.....#.................................#..........................................#.
......................................................#.........#.................................................................
...............#..............#........................................................................##.......#.............##..
...............#.......#.........#.........................#.......................##.............................................
..................#....................................#......................................................##...#....#.......#.
..#........#.....#...............#...............................#.........................#.#........#....#......................
..#.............#.......##...#......#....................................................................................#........
............................#.......#...........#.............#.............#..........................#..........................
.............#........................#........................................................#.........#........................
.#............#.....#...........................................#..#............................#..............#..........#.......
................#.....................................#..............................#............................................
..................#........................................#.#.................................................................#..
.#............#.......#..................................#....#.................................................#..............#.#
........................#........#................#.............#..#....#.#.#.........#........##..................#..#...........
.#........#......##........#.................................................#.#.........#......#.................................
...........#.#.##.#.........#.#..#............#.....................................................#.............#...............
..........#...............#......#...............#.#..............................#..........#........#..#...##.........#..#......
..........................................................#...........................................#...........................
................#.....#.............#...........................................................#.....#..........#...#...##.......
.....................#......#....................#..................#.....................#................................#......
......#........#.........#.....................................#......................#...........#................#.......#......
.........#.......#...#..................##.#...#...........#.......#............#...#....#...........#................#...........
..........................................#..........................#........#.....##............#.........................#.....
..........#...................##.......#.............#....##..............#.........#..............#........#..........#....#.....
.#....##........#.....................................#...#.............................#..............#.....#....................
....#..#................................................#.......#..........#.....#.....#..........................................
.............##...............#..........#...............................................#............#..............#..##....#...
......#...............#...............#.........................................................................#.#..............#
......#........................................................................................#.......#.....#................#...
.......#..#...#.............................#......#.....#........................................#.........................#..##.
.................................#..................#.......#......#...................#...................#.......#............#.
......#....................#.........................#........................................................#...#.......#..#..#.
..##....#...............................#.................#....#........#......#..........#....#........#..................#......
..................#..........#................................#.........#...........#..#......#.....................#.............
##.................................................#..............#....#...............#..........................................
....#..............#.............#..........................................................................#................#....
..................................................#...#..#.......#................................................#...........#...
.....#.......#...............................................................#......#.....#......................................#
....#....................##....................#............#................................#..#....#....#..........#............
.#.........................#.....................#..........................##............................................#.......
.......................#.........................................#................................................................
...............#........................................................................#..........#.............................#
.#..............................#..#....................#........................#......#.#......#.......#....................#..#
..........................#........#.........#.........#...#..#................#........#.........................#...............
..#.................................#.........#......................#............................................................
...........................#..............................................#.................#...............#.....................
..........#..................#.............................................#.......................#..............................
....................#............##..........................#...............#..........#.......................................#.
....................#....#.....................................................................#.................................#
....#.......#...................#....#.#....#..................................#.#....#..#.............................#.....##...
.............#.#...................................................................#........#..............................#......
.......................#.....................#.......#.........................................#..........#.......................
...............#..............#..................................#.............#..................................................
......................................................................................#........#......................#.....#.....
.........#.....................................................#................#..........................#........###...........
...................#..##...............#......................#...................................................................
.............#........................................#..................................#.#.#....................................
......#............#.........................#..........#..#.................................................................##...
............#...............#..................................#...........#...............................#...........#..........
................#.......#.......................#................#.............#................................#.................
.........................#.#.........#..#.....#.....................................#................................#............
..#...............#..#..........................#.#.....#....................#....................................................
................................................................................#..........#..............#.......................
............#.#......#......#........#..................#...#.....................................................................
....#......................#........................#..................#......#.....#.............................................
.#..................#...........................#..........#..........................................#....#......................
...............#......................#.......#.....#...#.................#...............................................#.......
#...#.......#..............................................................................................#...........#......#...
........................#......................#..........#...............................##......#...........................#...
....................#....#..............#.....#.....#................#............................................................
................#........................................................................................#........................
...##................#.............#..............................................................................................
.#....#........................................................................................................................##.
..#...................................#......#.#......#...................#........#.............................#....##..........
.......................................................#..#....#..#.................................................#.............
............#..................#......#.....#...........................................................#..#........#............#
..#................................#....................................................................#.............#......#....
..#..........#........#..............................................................................................#............
.....#.....................#..............#.................................#................................#...#................
........................#........#..................................................................................#.............
...#...........#.............................................#....................#....#..........#...............................
...................#...........#...................................................................#...........#..................
...........#............................#......................................................................................##.
#..............#.#.......................................#.......................#.....#...........#.......#...........#.##.......
..............................................................##.........................................#.............#.........#
...........................#.#..................................................#..................#..#...........................
.....................................#...............#.....#...................................#..................................
..#...................#.#....#...#......................................................#.#..................................#....
..........................................#......................................................................#................
.............#...................................................................#...#....#........#...................#..........
.......................#.......................................##...........#......#......#..............................#........
.......#..............#..............#..............................................................#............................#
...........................................#...#.......#......#...............................#.........#.........................
.......#...................................................#........................^..#..........................................
.#..........................................................................................#.......#.#..#........................
............................##........................................................................#..#........................
..........#.#..#....#.##........................#.................................................................................
......#.#...................................#...#...................#.............#.....#.........................................
.................#........................................................................................#..#.#..................
#....................#.......................................#..#..#.....#..............#......................................#..
..............#.#............................................................#.....#......................................#......#
....................#.......#.............................#..............#.........................................##.............
.....#................................#.#...........#...........#.......................................#...#....#................
...............#...#......................#............................#..................................#.......................
....#........##...............................................................#......#...#.........#.....#..................#.....
...............................#......................................................................#...........................
............................#.............................#........##...............#................#....#...#..............#....
.......................#................#.......#........................................................................#........
..................................................................................#......................#.......#.#..............
........#.........................#........#.........................#.......................#......................#......#......
.........................#..#...........#..#.......................#.#.................#..........................................
......#.................#......................................................................#........................#.........
......................................##..........#...........................#........#...........#..............................
.......................................#...........................#.........#....#................#...............#..............
...........#...........#.........................#.......#.................#....#.#...........#..................#.##...........#.
...#..................#..#...............#..#...................................#.......#................#...................#....
...............#............#.......#.............#............#......###.............#.............................#..........#..
.......................................#...........................................#........#...........#.........................
................#...........#.....#..#...........##..................##..........#....#.....#...#........#........................
...............................##.............................................................#..........#...#....#...............
............#.................#...##.........#.......................................................................#............
...........#.#............................#...............##...........................................#............#....#........
...............................................#...........................................#..........#......................#....
......................................#........................................#.....................##...........#.....#..#.#....
..............................#.......#...#.#...............................................................................##....
................##......#..#.......#...........#............#.#......#..#................#..#.....#..................##...........
#.....#...........................#....................#.........................................................................#
............#.............#........#........#.#...............#...........................#.........#.............#......#........
#...#.........#.....#...................................................#.........................................................
.....................#...........#....................#.....#............##..........#....#..........#......#..........#..........
...................................#.........#.....#.................................#..........................................#.
......................................................#.........#.................................................................
...............#..............#........................................................................##.......#.............##..
...............#.......#.........#.........................#.......................##.............................................
..................#....................................#......................................................##...#....#.......#.
..#........#.....#...............#...............................#.........................#.#........#....#......................
..#.............#.......##...#......#....................................................................................#........
............................#.......#...........#.............#.............#..........................#..........................
.............#........................#........................................................#.........#........................
.#............#.....#...........................................#..#............................#..............#..........#.......
................#.....................................#..............................#............................................
..................#........................................#.#.................................................................#..
.#............#.......#..................................#....#.................................................#..............#.#`.split('\n').map(x => x.split(''))).map(x => x.map(y => y === 'X' ? 1 : 0).reduce((c, i) => c + i)).reduce((c, i) => c + i));

// console.log(partOne())